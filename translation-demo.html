<!DOCTYPE html>
<html lang="en" translate="yes">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" content="notranslate">
    <meta name="google-translate-customization" content="enabled">
    <title>Translation Demo - GR Yachts Dubai</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Translation Widget CSS -->
    <link href="assets/css/translation-widget.css" rel="stylesheet">
    
    <!-- Google Translate Script -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,ar,ru,fr,es,zh-CN,hi,ur,de,it,pt,ja,ko,th,tr,nl,pl,sv,da,no,fi,he,fa',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                autoDisplay: false,
                multilanguagePage: true
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <style>
        /* Demo-specific styles */
        .demo-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 0;
        }

        .demo-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .demo-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .demo-features {
            margin-top: 2rem;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 1rem;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
        }

        .feature-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }
    </style>
</head>

<body>
    <!-- Hidden Google Translate Element -->
    <div id="google_translate_element" style="display: none;"></div>

    <div class="demo-content">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="demo-card">
                        <div class="demo-header">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h1 class="text-primary">GR Yachts Dubai Translation Demo</h1>
                                
                                <!-- Custom Translation Widget -->
                                <div class="translate-widget">
                                    <div class="translate-dropdown" onclick="toggleTranslateMenu()">
                                        <i class="fas fa-language"></i>
                                        <span class="current-language">EN</span>
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="translate-menu" id="translateMenu">
                                        <div class="translate-option active" onclick="changeLanguage('en', 'EN', '🇺🇸')">
                                            <span class="flag">🇺🇸</span>
                                            <span class="language-name">English</span>
                                        </div>
                                        <div class="translate-option" onclick="changeLanguage('ar', 'AR', '🇸🇦')">
                                            <span class="flag">🇸🇦</span>
                                            <span class="language-name">العربية</span>
                                        </div>
                                        <div class="translate-option" onclick="changeLanguage('ru', 'RU', '🇷🇺')">
                                            <span class="flag">🇷🇺</span>
                                            <span class="language-name">Русский</span>
                                        </div>
                                        <div class="translate-option" onclick="changeLanguage('fr', 'FR', '🇫🇷')">
                                            <span class="flag">🇫🇷</span>
                                            <span class="language-name">Français</span>
                                        </div>
                                        <div class="translate-option" onclick="changeLanguage('es', 'ES', '🇪🇸')">
                                            <span class="flag">🇪🇸</span>
                                            <span class="language-name">Español</span>
                                        </div>
                                        <div class="translate-option" onclick="changeLanguage('zh-CN', 'CN', '🇨🇳')">
                                            <span class="flag">🇨🇳</span>
                                            <span class="language-name">中文</span>
                                        </div>
                                        <div class="translate-option" onclick="changeLanguage('hi', 'HI', '🇮🇳')">
                                            <span class="flag">🇮🇳</span>
                                            <span class="language-name">हिन्दी</span>
                                        </div>
                                        <div class="translate-option" onclick="changeLanguage('ur', 'UR', '🇵🇰')">
                                            <span class="flag">🇵🇰</span>
                                            <span class="language-name">اردو</span>
                                        </div>
                                        <div class="translate-option" onclick="changeLanguage('de', 'DE', '🇩🇪')">
                                            <span class="flag">🇩🇪</span>
                                            <span class="language-name">Deutsch</span>
                                        </div>
                                        <div class="translate-option" onclick="changeLanguage('it', 'IT', '🇮🇹')">
                                            <span class="flag">🇮🇹</span>
                                            <span class="language-name">Italiano</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <p class="lead">Experience luxury yacht rentals in Dubai with our premium fleet. Choose your language from the dropdown above to see the translation in action!</p>
                        </div>

                        <div class="demo-features">
                            <h3>Our Premium Services</h3>
                            
                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-ship"></i>
                                </div>
                                <div>
                                    <h5>Luxury Yacht Fleet</h5>
                                    <p class="mb-0">Choose from our exclusive collection of premium yachts, each equipped with modern amenities and professional crew.</p>
                                </div>
                            </div>

                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-utensils"></i>
                                </div>
                                <div>
                                    <h5>Gourmet Catering</h5>
                                    <p class="mb-0">Enjoy world-class dining experiences with our professional catering services featuring international and local cuisines.</p>
                                </div>
                            </div>

                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div>
                                    <h5>Event Planning</h5>
                                    <p class="mb-0">From birthday parties to corporate events, we provide comprehensive event planning services for unforgettable experiences.</p>
                                </div>
                            </div>

                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-water"></i>
                                </div>
                                <div>
                                    <h5>Water Sports</h5>
                                    <p class="mb-0">Enjoy thrilling water activities including jet skiing, sea bobbing, and snorkeling in the beautiful waters of Dubai.</p>
                                </div>
                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <a href="index.html" class="btn btn-primary btn-lg">
                                <i class="fas fa-arrow-left me-2"></i>Back to Main Site
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Translation JavaScript -->
    <script>
        // Translation Widget Functions
        let isGoogleTranslateLoaded = false;

        document.addEventListener('DOMContentLoaded', function() {
            initializeTranslation();
            
            // Close translation menus when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.translate-widget')) {
                    closeAllTranslateMenus();
                }
            });
        });

        function initializeTranslation() {
            // Check if Google Translate is available
            if (typeof google !== 'undefined' && google.translate) {
                isGoogleTranslateLoaded = true;
                console.log('Google Translate loaded successfully');
            } else {
                // Wait for Google Translate to load
                const checkInterval = setInterval(() => {
                    if (typeof google !== 'undefined' && google.translate) {
                        isGoogleTranslateLoaded = true;
                        console.log('Google Translate loaded successfully');
                        clearInterval(checkInterval);
                    }
                }, 100);
                
                // Stop checking after 10 seconds
                setTimeout(() => {
                    clearInterval(checkInterval);
                    if (!isGoogleTranslateLoaded) {
                        console.warn('Google Translate failed to load');
                    }
                }, 10000);
            }

            // Load saved language preference - but don't auto-trigger translation
            const savedLanguage = localStorage.getItem('selectedLanguage');
            if (savedLanguage && savedLanguage !== 'en') {
                const langData = getLanguageData(savedLanguage);
                if (langData) {
                    updateLanguageDisplay(langData.code);
                    updateActiveLanguageOption(savedLanguage);
                }
            }
        }

        function toggleTranslateMenu() {
            const menu = document.getElementById('translateMenu');
            const isVisible = menu.classList.contains('show');
            
            closeAllTranslateMenus();
            
            if (!isVisible) {
                menu.classList.add('show');
            }
        }

        function closeAllTranslateMenus() {
            const menus = document.querySelectorAll('.translate-menu');
            menus.forEach(menu => menu.classList.remove('show'));
        }

        function changeLanguage(langCode, displayCode, flag) {
            // Update display
            updateLanguageDisplay(displayCode);
            
            // Close menus
            closeAllTranslateMenus();
            
            // Save preference
            localStorage.setItem('selectedLanguage', langCode);
            
            // Trigger Google Translate
            if (langCode === 'en') {
                // Reset to original language
                resetToOriginalLanguage();
            } else {
                triggerGoogleTranslate(langCode);
            }
            
            // Update active states
            updateActiveLanguageOption(langCode);
        }

        function updateLanguageDisplay(code) {
            const currentLanguageElements = document.querySelectorAll('.current-language');
            currentLanguageElements.forEach(element => {
                element.textContent = code;
            });
        }

        function updateActiveLanguageOption(langCode) {
            const options = document.querySelectorAll('.translate-option');
            options.forEach(option => {
                option.classList.remove('active');
                const onclick = option.getAttribute('onclick');
                if (onclick && onclick.includes(`'${langCode}'`)) {
                    option.classList.add('active');
                }
            });
        }

        function triggerGoogleTranslate(targetLang) {
            if (!isGoogleTranslateLoaded) {
                console.warn('Google Translate not loaded yet');
                // Set cookie and reload only once
                setCookie('googtrans', `/en/${targetLang}`, 1);
                setTimeout(() => window.location.reload(), 100);
                return;
            }

            try {
                // Method 1: Try to use Google Translate's internal functions
                if (window.google && window.google.translate && window.google.translate.TranslateElement) {
                    const translateElement = document.querySelector('.goog-te-combo');
                    if (translateElement) {
                        translateElement.value = targetLang;
                        translateElement.dispatchEvent(new Event('change'));
                        return;
                    }
                }

                // Method 2: Use cookie-based approach with single reload
                const currentCookie = getCookie('googtrans');
                const newCookie = `/en/${targetLang}`;
                
                if (currentCookie !== newCookie) {
                    setCookie('googtrans', newCookie, 1);
                    setTimeout(() => window.location.reload(), 100);
                }

            } catch (error) {
                console.error('Translation error:', error);
                // Fallback: Set cookie and reload only if different
                const currentCookie = getCookie('googtrans');
                const newCookie = `/en/${targetLang}`;
                
                if (currentCookie !== newCookie) {
                    setCookie('googtrans', newCookie, 1);
                    setTimeout(() => window.location.reload(), 100);
                }
            }
        }

        function resetToOriginalLanguage() {
            try {
                // Check current cookie state
                const currentCookie = getCookie('googtrans');
                
                if (currentCookie && currentCookie !== '/en/en' && currentCookie !== '') {
                    // Clear Google Translate cookie
                    setCookie('googtrans', '/en/en', 1);
                    
                    // Try to reset using Google Translate API first
                    if (window.google && window.google.translate) {
                        const translateElement = document.querySelector('.goog-te-combo');
                        if (translateElement) {
                            translateElement.value = '';
                            translateElement.dispatchEvent(new Event('change'));
                            return;
                        }
                    }
                    
                    // Fallback: Reload page only if needed
                    setTimeout(() => window.location.reload(), 100);
                }
            } catch (error) {
                console.error('Reset error:', error);
                // Only reload if there was actually a translation active
                const currentCookie = getCookie('googtrans');
                if (currentCookie && currentCookie !== '/en/en' && currentCookie !== '') {
                    setCookie('googtrans', '/en/en', 1);
                    setTimeout(() => window.location.reload(), 100);
                }
            }
        }

        function setCookie(name, value, days) {
            let expires = '';
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = '; expires=' + date.toUTCString();
            }
            document.cookie = name + '=' + (value || '') + expires + '; path=/';
        }

        function getLanguageData(langCode) {
            const languages = {
                'en': { code: 'EN', display: 'EN', flag: '🇺🇸' },
                'ar': { code: 'AR', display: 'AR', flag: '🇸🇦' },
                'ru': { code: 'RU', display: 'RU', flag: '🇷🇺' },
                'fr': { code: 'FR', display: 'FR', flag: '🇫🇷' },
                'es': { code: 'ES', display: 'ES', flag: '🇪🇸' },
                'zh-CN': { code: 'CN', display: 'CN', flag: '🇨🇳' },
                'hi': { code: 'HI', display: 'HI', flag: '🇮🇳' },
                'ur': { code: 'UR', display: 'UR', flag: '🇵🇰' },
                'de': { code: 'DE', display: 'DE', flag: '🇩🇪' },
                'it': { code: 'IT', display: 'IT', flag: '🇮🇹' }
            };
            
            return languages[langCode] || null;
        }

        // Check for existing translation on page load - but don't auto-reload
        document.addEventListener('DOMContentLoaded', function() {
            const existingTranslation = getCookie('googtrans');
            if (existingTranslation && existingTranslation !== '/en/en' && existingTranslation !== '') {
                const parts = existingTranslation.split('/');
                if (parts.length >= 3) {
                    const langCode = parts[2];
                    const langData = getLanguageData(langCode);
                    if (langData) {
                        updateLanguageDisplay(langData.code);
                        updateActiveLanguageOption(langCode);
                        // Store the language preference
                        localStorage.setItem('selectedLanguage', langCode);
                    }
                }
            }
        });

        function getCookie(name) {
            const nameEQ = name + '=';
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
